{% comment %}
  This file is a snippet used for rendering images in a gallery with optional zoom and lazy loading features.

  Accepts:
  - media: {Object} Liquid object for image values.
  - ratio_class: {string} Class string to set the aspect ratio of the image.
  - crop_class: {string} Class string to set the crop behavior of the image.
  - enable_zoom: {boolean} Indicates if zoom feature is enabled.
  - enable_alt: {boolean} Indicates if alternative text is displayed.
  - index: {integer} Index of the image in the gallery.

  Usage:
    {% render 'gallery__image',
      media: product.featured_media,
      ratio_class: 'aspect-ratio--16x9',
      crop_class: 'crop-center',
      enable_zoom: true,
      enable_alt: true,
      index: forloop.index
    %}

  Recommendations:
  - Use this snippet within a gallery section to provide a consistent and feature-rich image display.
  - Ensure that 'settings' variables are configured in the parent theme or section for proper functionality.
{% endcomment %}

{% liquid
  if forloop.index <= 2
    assign loading = false
  else
    assign loading = true
  endif
%}

<div
  class="
    w-full overflow-hidden
    {% if enable_zoom %}
      cursor-zoom-in
    {% endif %}
  "
  {% if enable_zoom %}
    @click="
      fullscreen = true;
      has_overlay = true;
      hide_header = true;
      enable_body_scrolling = false;
      galleryScrollToIndex({{ index }});
    "
  {% endif %}
>
  {% render 'component__image',
    image: media,
    max_width: 2500,
    ratio_class: ratio_class,
    crop_class: crop_class,
    enable_lazy_load: loading
  %}
</div>

{% if enable_alt == true and media.alt != product.title %}
  <div class="type--smaller color__bg-overlay-1 animation-300 absolute left-0 top-0 whitespace-normal p-1 px-2 text-left opacity-0 hover:opacity-75 group-hover/slide:opacity-75">
    {{ media.alt }}
  </div>
{% endif %}
