<!doctype html>
<html
  class="min-h-[100vh]"
  lang="{{ request.locale.iso_code }}"
  x-data="app()"
  x-init="
    updateCart(false); 
    handleSharedCart(); 
    handleSharedDiscount();
    initAnimationObserver();
    initPopstate();
    handleOpnedAccount();
  ">

  <head>
    {% comment %} Meta {% endcomment %}
    {% render 'theme__meta' %}

    {% comment %} Preload {% endcomment %}
    {% unless settings.type_header_font.system? and settings.type_body_font.system? %}
      <link rel="preconnect" href="https://fonts.shopifycdn.com" crossorigin>
    {% endunless %}

    {% comment %} Assets {% endcomment %}
    {% render 'theme__styles' %}
    {% render 'assets' with 'styles.css', preload_stylesheet: true %}
    {{ content_for_header }}

    {% comment %} Structured data {% endcomment %}
    {% render 'theme__structured-data' %}
  </head>

  <body 
    class="
      min-h-[100vh] break-words animation-500--all
      {{ template | handle }}
    "
    :class="{
      'overflow-hidden': !enable_body_scrolling
    }"
    @scroll.window.throttle.100ms="
      if(!Shopify.visualPreviewMode){
        handleBodyScroll();
      }
    ">

    {% comment %} Skip to content link {% endcomment %}
    <a 
      class="btn btn--plain btn--small top-4 left-4 focus:translate-y-0 fixed !z-[100] transform -translate-y-20 shadow-md"
      href="#root">
      {{ 'actions.skip_to_content' | t }}
    </a>

    {% comment %} Header {% endcomment %}
    <header 
      class="
        z-50 animation-500
        {{ settings.header_position }}
        {% if settings.header_position == 'dynamic' %}sticky top-0 left-0 right-0{% endif %}
        {% if settings.header_position == 'sticky' %}sticky top-0{% endif %}
      "
      {% if settings.header_position == 'dynamic' %}
        :style="is_scrolled ? 
          'pointer-events: none;' : 
          'pointer-events: auto;'
        "
      {% endif %}
      :class="{
        '!z-10' : hide_header
      }"
      x-ref="header"
      x-init="
        header_group_height = $refs.header.offsetHeight - 1;
      ">
      <div
        class="animation-500"
        {% if settings.header_position == 'dynamic' %}
          :style="is_scrolled ? 
            'transform: translateY(-2rem); opacity: 0; pointer-events: none;' : 
            'transform: none; opacity: 1;'
          "
        {% endif %}>
        {% section 'theme__min-header' %}
      </div>
    </header>
    
    {% comment %} Main Content {% endcomment %}
    <main 
      id="root" 
      role="main">
      {{ content_for_layout }}
    </main>

    {% comment %} Scripts {% endcomment %}
    {% render 'assets' with 'main.js' %}
    {% render 'theme__scripts' %}
    
  </body>
  
</html>
